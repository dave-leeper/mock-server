(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bfa7cec6"],{"22f8":function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var r=a("fc74"),s=a.n(r),n=a("59a1"),i=a.n(n),o=a("c47a"),u=a.n(o),c=function(){function t(){s()(this,t)}return i()(t,null,[{key:"getMessage",value:function(e,a){return t.LANGUAGE.en_US===e?0>=a||t.messages_en_US.length<a?null:t.messages_en_US[a-1]:null}}]),t}();u()(c,"LANGUAGE",{en_US:1}),u()(c,"SOUND_NONE",0),u()(c,"SOUND_ERROR","../assets/Error.wav"),u()(c,"SOUND_SUCCESS","../assets/Success.wav"),u()(c,"ERROR_USERNAME_REQUIRED",1),u()(c,"ERROR_INVALID_USERNAME",2),u()(c,"ERROR_INVALID_USERNAME_LENGTH",3),u()(c,"ERROR_PASSWORD_REQUIRED",4),u()(c,"ERROR_PASSWORD_LENGTH",5),u()(c,"ERROR_PASSWORDS_DO_NOT_MATCH",6),u()(c,"ERROR_EMAIL_REQUIRED",7),u()(c,"ERROR_INVALID_EMAIL",8),u()(c,"SUCCESS_ACCOUNT_ADDED",9),u()(c,"SUCCESS_ACCOUNT_UPDATED",10),u()(c,"SUCCESS_SIGN_IN",11),u()(c,"ERROR_NETWORK",12),u()(c,"ERROR_INVALID_CREDENTIALS",13),u()(c,"ERROR_UNABLE_TO_OBTAIN_BOOK_LIST",14),u()(c,"ERROR_NO_FAVORITES",15),u()(c,"ERROR_NO_CART",16),u()(c,"SUCCESS_PURCHASE",17),u()(c,"MESSAGE_ALREADY_PURCHASED",18),u()(c,"SUCCESS_PASSWORD_RESET_REQUEST",19),u()(c,"NO_CART",20),u()(c,"NO_FAVORITES",21),u()(c,"NO_PURCHASES",22),u()(c,"SIGN_IN_TO_ADD_TO_FAVORITES_OR_CART",23),u()(c,"TOOLS",24),u()(c,"messages_en_US",["A user name is required.","Invalid user name. User name can contain only letters, numbers, hyphens, or underscores.","Invalid user name. Must be at least 5 characters long.","A password is required.","Invalid password. Must be at least 5 characters long.","Passwords do not match.","Email required.","Invalid email.","Account created successfully. Welcome to U.S. Comics.","Account updated successfully.","Login successful.","A network error occured.","Invalid credentials.","Unable to obtain the list of your books from the server.","You don't have any favorites.","Your cart is empty.","Purchase successful.","You purchased this item on {0}.","Password reset link sent. Check your email.","There's nothing in our cart. Get shopping!","You don't have any favorites. Yet.","It doesn't look like you've bought anything yet. Cheapskate.","Sign in to add this book to your favoites or cart.","Author: David Leeper (davidkleeper@gmail.com) Tools: Vue, Vue Router, Vuex, VueMQ, Quasar, and NodeJS."])},"246a":function(t,e,a){"use strict";var r=a("5d68"),s=a.n(r);s.a},"5d68":function(t,e,a){},"8b82":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var r=a("fc74"),s=a.n(r),n=function t(e,a,r,n){s()(this,t),this.message=e,this.sound=a,this.lifetime=r,this.hasImage=n}},"95b8":function(t,e,a){"use strict";a("55dd"),a("ac6a"),a("cadf"),a("5df3"),a("551c"),a("06db");var r=a("967e"),s=a.n(r),n=(a("96cf"),a("fa84")),i=a.n(n),o=a("fc74"),u=a.n(o),c=a("59a1"),E=a.n(c),_=a("c47a"),R=a.n(_),A=function(){function t(e,a){u()(this,t),this.id=e,this.issue=a,this.issue.length&&(this.issue=parseInt(this.issue))}return E()(t,null,[{key:"getFromServer",value:function(){var t=i()(s.a.mark((function t(e){var a,r;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,{method:"GET"});case 3:return a=t.sent,t.next=6,a.text();case 6:return r=t.sent,t.abrupt("return",{status:a.status,statusText:a.statusText,body:r,headers:a.headers,cookies:a.cookies});case 10:return t.prev=10,t.t0=t["catch"](0),t.abrupt("return",{status:500,body:JSON.stringify(t.t0)});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getBooksFromServer",value:function(){var e=i()(s.a.mark((function e(a,r){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){r||e([]);var o=function(){var e=i()(s.a.mark((function e(r){var n,i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a+r.id+"/"+r.issue,e.next=3,t.getFromServer(n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Promise.all(r.map(o)).then((function(t){for(var a=[],r=0;r<t.length;r++){var s=t[r];200===s.status&&a.push(JSON.parse(s.body))}e(a)}))})));case 1:case"end":return e.stop()}}),e)})));function a(t,a){return e.apply(this,arguments)}return a}()},{key:"getBook",value:function(t,e,a){if(!t)return null;for(var r=0;r<t.length;r++){var s=t[r];if(s.id===e&&s.issue===a)return s}return null}},{key:"hasBook",value:function(e,a,r){return!!t.getBook(e,a,r)}},{key:"sortBooks",value:function(e,a){if(e)if(t.SORT_BY_DATE===a){for(var r=e.length,s=1;s<r;s++){for(var n=e[s],i=s-1;i>=0&&parseInt(e[i].transactionDate)>parseInt(n.transactionDate);i--)e[i+1]=e[i];e[i+1]=n}e.reverse()}else if(t.SORT_BY_NAME===a){var o=function(t,e){return t.id===e.id?t.issue-e.issue:(""+t.id).localeCompare(e.id)};e.sort(o)}}}]),E()(t,[{key:"makeKey",value:function(){return this.id+" "+this.issue}}]),t}();R()(A,"SORT_BY_NAME",1),R()(A,"SORT_BY_DATE",2),e["a"]=A},a6f0:function(t,e,a){},a7ee:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var r=a("fc74"),s=a.n(r),n=a("c47a"),i=a.n(n),o=function t(){s()(this,t)};i()(o,"CACHE_PAGE_LOADED","CACHE_PAGE_LOADED"),i()(o,"CACHE_PAGE_ADDED","CACHE_PAGE_ADDED"),i()(o,"CACHE_PAGE_REMOVED","CACHE_PAGE_REMOVED"),i()(o,"CACHE_PAGE_REFRESHED","CACHE_PAGE_REFRESHED"),i()(o,"CACHE_EXPIRED_PAGES_REFRESHED","CACHE_EXPIRED_PAGES_REFRESHED"),i()(o,"CACHE_CLEARED","CACHE_CLEARED"),i()(o,"CACHE_PAGE_FAULT","CACHE_PAGE_FAULT"),i()(o,"USER_SIGNED_IN","USER_SIGNED_IN"),i()(o,"USER_SIGNED_OUT","USER_SIGNED_OUT"),i()(o,"READER_NAV_BAR_FIRST_PAGE","READER_NAV_BAR_FIRST_PAGE"),i()(o,"READER_NAV_BAR_PREVIOUS_PAGE","READER_NAV_BAR_PREVIOUS_PAGE"),i()(o,"READER_NAV_BAR_NEXT_PAGE","READER_NAV_BAR_NEXT_PAGE"),i()(o,"READER_NAV_BAR_LAST_PAGE","READER_NAV_BAR_LAST_PAGE"),i()(o,"READER_NAV_BAR_HOME","READER_NAV_BAR_HOME"),i()(o,"READER_NAV_BAR_ENABLE_FIRST","READER_NAV_BAR_ENABLE_FIRST"),i()(o,"READER_NAV_BAR_ENABLE_PREVIOUS","READER_NAV_BAR_ENABLE_PREVIOUS"),i()(o,"READER_NAV_BAR_ENABLE_NEXT","READER_NAV_BAR_ENABLE_NEXT"),i()(o,"READER_NAV_BAR_ENABLE_LAST","READER_NAV_BAR_ENABLE_LAST"),i()(o,"READER_NAV_BAR_PROGRESS","READER_NAV_BAR_PROGRESS"),i()(o,"READER_NAV_BAR_ADD_TO_CART","READER_NAV_BAR_ADD_TO_CART"),i()(o,"READER_NAV_BAR_REMOVE_FROM_CART","READER_NAV_BAR_REMOVE_FROM_CART"),i()(o,"READER_NAV_BAR_ADD_TO_FAVORITES","READER_NAV_BAR_ADD_TO_FAVORITES"),i()(o,"READER_NAV_BAR_REMOVE_FROM_FAVORITES","READER_NAV_BAR_REMOVE_FROM_FAVORITES"),i()(o,"PURCHASED_BOOK_SELECTED","PURCHASED_BOOK_SELECTED"),i()(o,"STORE_BOOK_SELECTED","STORE_BOOK_SELECTED"),i()(o,"FAVORITES_BOOK_SELECTED","STORE_BOOK_SELECTED"),i()(o,"CART_BOOK_REMOVED","CART_BOOK_REMOVED"),i()(o,"HIDE_HEADER","HIDE_HEADER"),i()(o,"SHOW_HEADER","SHOW_HEADER"),i()(o,"HIDE_DRAWER","HIDE_DRAWER"),i()(o,"SHOW_DRAWER","SHOW_DRAWER"),i()(o,"USER_MESSAGE","USER_MESSAGE"),i()(o,"USER_ERROR","USER_ERROR")},a83d:function(t,e,a){"use strict";var r=a("a6f0"),s=a.n(r);s.a},adb5:function(t,e,a){"use strict";var r=a("967e"),s=a.n(r),n=(a("96cf"),a("fa84")),i=a.n(n),o=a("fc74"),u=a.n(o),c=a("59a1"),E=a.n(c),_=a("d5eb"),R=a("8b82"),A=a("a7ee"),h=a("22f8"),l=function(){function t(){u()(this,t)}return E()(t,null,[{key:"getFromServer",value:function(){var t=i()(s.a.mark((function t(e){var a,r;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,{method:"GET"});case 3:return a=t.sent,t.next=6,a.text();case 6:return r=t.sent,t.abrupt("return",{status:a.status,statusText:a.statusText,body:r,headers:a.headers,cookies:a.cookies});case 10:return t.prev=10,t.t0=t["catch"](0),t.abrupt("return",{status:500,body:JSON.stringify(t.t0)});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"postToServer",value:function(){var t=i()(s.a.mark((function t(e,a){var r,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,{method:"POST",body:a});case 3:return r=t.sent,t.next=6,r.text();case 6:return n=t.sent,t.abrupt("return",{status:r.status,statusText:r.statusText,body:n,headers:r.headers,cookies:r.cookies});case 10:return t.prev=10,t.t0=t["catch"](0),t.abrupt("return",{status:500,body:JSON.stringify(t.t0)});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"hasErrors",value:function(t){if(200===t.status)return!1;if(500!==t.status){var e=new R["a"](t.body,h["a"].SOUND_ERROR,0,!1);return _["a"].broadcast(A["a"].USER_ERROR,e),console.log(t.body),!0}var a=h["a"].getMessage(h["a"].LANGUAGE.en_US,h["a"].ERROR_NETWORK),r=new R["a"](a,h["a"].SOUND_ERROR,0,!1);return _["a"].broadcast(A["a"].USER_ERROR,r),console.log(a),!0}}]),t}();e["a"]=l},d5eb:function(t,e,a){"use strict";a.d(e,"a",(function(){return E}));a("551c"),a("ac6a"),a("cadf"),a("06db"),a("5df3");var r=a("fc74"),s=a.n(r),n=a("59a1"),i=a.n(n),o=a("c47a"),u=a.n(o),c=a("a7ee"),E=function(){function t(){s()(this,t)}return i()(t,null,[{key:"register",value:function(e,a,r){t.listeners.push({listener:e,message:a,callback:r})}},{key:"isRegistered",value:function(e,a){for(var r=0;r<t.listeners.length;r++){var s=t.listeners[r];if(s.listener===e&&s.message===a)return!0}return!1}},{key:"unregister",value:function(e,a){for(var r=[],s=0;s<t.listeners.length;s++){var n=t.listeners[s];n.listener===e&&n.message===a&&r.push(t.listeners.splice(s,1)[0])}return r}},{key:"unregisterAll",value:function(){t.listeners=[]}},{key:"broadcast",value:function(e,a){for(var r=[],s=0;s<t.listeners.length;s++){var n=t.listeners[s];n.message===e&&(n.callback(a),r.push(n))}return r}},{key:"broadcastError",value:function(e){return t.broadcast(c["a"].ERROR,{message:e})}},{key:"broadcastNotification",value:function(e){return t.broadcast(c["a"].NOTIFICATION,{message:e})}},{key:"call",value:function(e,a){for(var r=[],s=0;s<t.listeners.length;s++){var n=t.listeners[s];n.message===e&&r.push(n.callback(a))}return Promise.all(r)}}]),t}();u()(E,"listeners",[])},e375:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex flex-center"},[a("canvas",{staticClass:"reader-page",attrs:{id:"page-canvas",width:"1275",height:"1650"}}),t.navBarVisible?a("ReaderNavBar",{staticClass:"reader-nav-bar"}):t._e()],1)},s=[],n=a("967e"),i=a.n(n),o=(a("96cf"),a("fa84")),u=a.n(o),c=a("fc74"),E=a.n(c),_=a("59a1"),R=a.n(_),A=a("adb5"),h=function(){function t(e,a,r){E()(this,t),this.username=e,this.id=a,this.issue=r,this.issue.length&&(this.issue=parseInt(this.issue))}return R()(t,[{key:"postToServer",value:function(){var t=u()(i.a.mark((function t(e){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,this.username&&a.set("username",this.username),this.id&&a.set("id",this.id),this.issue&&a.set("issue",this.issue),t.abrupt("return",A["a"].postToServer(e,a));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),l=h,d=function(){function t(e,a,r){E()(this,t),this.username=e,this.id=a,this.issue=r,this.issue.length&&(this.issue=parseInt(this.issue))}return R()(t,[{key:"postToServer",value:function(){var t=u()(i.a.mark((function t(e){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,this.username&&a.set("username",this.username),this.id&&a.set("id",this.id),this.issue&&a.set("issue",this.issue),t.abrupt("return",A["a"].postToServer(e,a));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),v=d,f=a("a7ee"),m=a("d5eb"),S=a("8b82"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column"},[a("div",{staticClass:"reader-nav-bar-control column justify-between items-center content-center"},[a("div",{staticClass:"reader-nav-bar"},[a("div",[a("q-btn",{staticClass:"nav-button",attrs:{rounded:"",color:"white","text-color":"black",icon:"first_page",disable:!t.firstEnabled},on:{click:t.firstPage}}),a("q-btn",{staticClass:"nav-button",attrs:{rounded:"",color:"white","text-color":"black",icon:"chevron_left",disable:!t.previousEnabled},on:{click:t.previousPage}})],1),a("div",[a("div",{staticClass:"row"},[a("q-btn",{staticClass:"nav-button",attrs:{rounded:"",color:"white","text-color":"black",icon:"arrow_upward"},on:{click:t.home}}),2==t.$store.state.main.readerState?a("q-btn",{staticClass:"nav-button",attrs:{rounded:"",color:"white","text-color":t.favoritesColor,icon:"favorite",disable:t.favoritesDisabled},on:{click:t.toggleFavorite}}):t._e(),2==t.$store.state.main.readerState?a("q-btn",{staticClass:"nav-button",attrs:{rounded:"",color:"white","text-color":t.cartColor,icon:"shopping_cart",disable:t.cartDisabled},on:{click:t.toggleCart}}):t._e()],1)]),a("div",[a("q-btn",{staticClass:"nav-button",attrs:{rounded:"",color:"white","text-color":"black",icon:"chevron_right",disable:!t.nextEnabled},on:{click:t.nextPage}}),a("q-btn",{staticClass:"nav-button",attrs:{rounded:"",color:"white","text-color":"black",icon:"last_page",disable:!t.lastEnabled},on:{click:t.lastPage}})],1)])])])},D=[],N=a("95b8"),B={name:"ReaderNavBar",data:function(){return{firstEnabled:!1,previousEnabled:!1,nextEnabled:!0,lastEnabled:!0,progress:50}},mounted:function(){m["a"].register(this,f["a"].READER_NAV_BAR_ENABLE_FIRST,this.enableFirst),m["a"].register(this,f["a"].READER_NAV_BAR_ENABLE_PREVIOUS,this.enablePrevious),m["a"].register(this,f["a"].READER_NAV_BAR_ENABLE_NEXT,this.enableNext),m["a"].register(this,f["a"].READER_NAV_BAR_ENABLE_LAST,this.enableLast),m["a"].register(this,f["a"].READER_NAV_BAR_PROGRESS,this.setProgress)},computed:{cartColor:function(){return this.inCart?"red":"black"},cartDisabled:function(){return!this.$store.state.main.account||!this.$store.state.main.account.username},favoritesColor:function(){return this.isFavorite?"red":"black"},favoritesDisabled:function(){return!this.$store.state.main.account||!this.$store.state.main.account.username},inCart:function(){var t=this.$store.state.main.currentBook;return N["a"].hasBook(this.$store.state.main.cart,t.id,t.issue)},isFavorite:function(){var t=this.$store.state.main.currentBook;return N["a"].hasBook(this.$store.state.main.favorites,t.id,t.issue)}},methods:{firstPage:function(t){m["a"].broadcast(f["a"].READER_NAV_BAR_FIRST_PAGE)},previousPage:function(t){m["a"].broadcast(f["a"].READER_NAV_BAR_PREVIOUS_PAGE)},home:function(t){m["a"].broadcast(f["a"].READER_NAV_BAR_HOME)},nextPage:function(t){m["a"].broadcast(f["a"].READER_NAV_BAR_NEXT_PAGE)},lastPage:function(t){m["a"].broadcast(f["a"].READER_NAV_BAR_LAST_PAGE)},enableFirst:function(t){this.firstEnabled=t},enablePrevious:function(t){this.previousEnabled=t},enableNext:function(t){this.nextEnabled=t},enableLast:function(t){this.lastEnabled=t},toggleCart:function(){N["a"].hasBook(this.$store.state.main.cart,this.$store.state.main.currentBook.id,this.$store.state.main.currentBook.issue)?m["a"].broadcast(f["a"].READER_NAV_BAR_REMOVE_FROM_CART):m["a"].broadcast(f["a"].READER_NAV_BAR_ADD_TO_CART)},toggleFavorite:function(){N["a"].hasBook(this.$store.state.main.favorites,this.$store.state.main.currentBook.id,this.$store.state.main.currentBook.issue)?m["a"].broadcast(f["a"].READER_NAV_BAR_REMOVE_FROM_FAVORITES):m["a"].broadcast(f["a"].READER_NAV_BAR_ADD_TO_FAVORITES)},setProgress:function(t){this.progress=t}}},O=B,b=(a("246a"),a("2877")),T=a("eebe"),g=a.n(T),C=a("9c40"),V=a("6b1d"),P=Object(b["a"])(O,p,D,!1,null,"eec9bda6",null),k=P.exports;g()(P,"components",{QBtn:C["a"],QLinearProgress:V["a"]});var I=a("22f8"),w=a("61b1"),U={name:"Reader",components:{ReaderNavBar:k},data:function(){return{currentPage:0,navBarTime:(new Date).getTime(),navBarVisible:!0,canvas:null,intervalId:null}},mounted:function(){var t=this;if(!this.$store.state.main.currentBook)return this.$store.commit("main/SIGN_OUT"),this.$store.commit("main/SET_USER_PANEL_STATE",w["a"].SIGN_IN),void("/index"!==this.$route.path&&this.$router.push({path:"/index"}).catch((function(){})));if(m["a"].broadcast(f["a"].HIDE_HEADER),m["a"].broadcast(f["a"].HIDE_DRAWER),m["a"].register(this,f["a"].READER_NAV_BAR_FIRST_PAGE,this.firstPage),m["a"].register(this,f["a"].READER_NAV_BAR_PREVIOUS_PAGE,this.previousPage),m["a"].register(this,f["a"].READER_NAV_BAR_HOME,this.home),m["a"].register(this,f["a"].READER_NAV_BAR_NEXT_PAGE,this.nextPage),m["a"].register(this,f["a"].READER_NAV_BAR_LAST_PAGE,this.lastPage),m["a"].register(this,f["a"].READER_NAV_BAR_REMOVE_FROM_CART,this.removeFromCart),m["a"].register(this,f["a"].READER_NAV_BAR_ADD_TO_CART,this.addToCart),m["a"].register(this,f["a"].READER_NAV_BAR_REMOVE_FROM_FAVORITES,this.removeFromFavorites),m["a"].register(this,f["a"].READER_NAV_BAR_ADD_TO_FAVORITES,this.addToFavorites),window.addEventListener("mousemove",this.updateNavBarTime),this.intervalId=setInterval((function(){t.updateNavBarVisible()}),300),this.updateNavBarButtons(),this.canvas=document.getElementById("page-canvas"),this.loadPage(),!this.$store.state.main.account){var e=I["a"].getMessage(I["a"].LANGUAGE.en_US,I["a"].SIGN_IN_TO_ADD_TO_FAVORITES_OR_CART),a=new S["a"](e,I["a"].NONE,0,!1);m["a"].broadcast(f["a"].USER_MESSAGE,a)}},methods:{firstPage:function(t){this.currentPage=0,this.updateNavBarTime(),this.updateNavBarButtons(),this.updateNavBaProgress(),this.loadPage()},previousPage:function(t){this.currentPage--,this.updateNavBarTime(),this.updateNavBarButtons(),this.updateNavBaProgress(),this.loadPage()},home:function(t){clearInterval(this.intervalId),"index"!==this.$route.path&&this.$router.push({path:"index"}).catch((function(){}))},addToCart:function(){var t=u()(i.a.mark((function t(){var e,a,r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$store.state.main.urlBase+"user/cart/add/data",a=new l(this.$store.state.main.account.username,this.$store.state.main.currentBook.id,this.$store.state.main.currentBook.issue),t.next=4,a.postToServer(e);case 4:if(r=t.sent,!A["a"].hasErrors(r)){t.next=7;break}return t.abrupt("return");case 7:this.$store.commit("main/ADD_CART",this.$store.state.main.currentBook);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),removeFromCart:function(){var t=u()(i.a.mark((function t(){var e,a,r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$store.state.main.urlBase+"user/cart/delete/data",a=new l(this.$store.state.main.account.username,this.$store.state.main.currentBook.id,this.$store.state.main.currentBook.issue),t.next=4,a.postToServer(e);case 4:if(r=t.sent,!A["a"].hasErrors(r)){t.next=7;break}return t.abrupt("return");case 7:this.$store.commit("main/REMOVE_CART",this.$store.state.main.currentBook);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addToFavorites:function(){var t=u()(i.a.mark((function t(){var e,a,r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$store.state.main.urlBase+"user/favorites/add/data",a=new v(this.$store.state.main.account.username,this.$store.state.main.currentBook.id,this.$store.state.main.currentBook.issue),t.next=4,a.postToServer(e);case 4:if(r=t.sent,!A["a"].hasErrors(r)){t.next=7;break}return t.abrupt("return");case 7:this.$store.commit("main/ADD_FAVORITE",this.$store.state.main.currentBook);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),removeFromFavorites:function(){var t=u()(i.a.mark((function t(){var e,a,r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$store.state.main.urlBase+"user/favorites/delete/data",a=new v(this.$store.state.main.account.username,this.$store.state.main.currentBook.id,this.$store.state.main.currentBook.issue),t.next=4,a.postToServer(e);case 4:if(r=t.sent,!A["a"].hasErrors(r)){t.next=7;break}return t.abrupt("return");case 7:this.$store.commit("main/REMOVE_FAVORITE",this.$store.state.main.currentBook);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),nextPage:function(t){this.currentPage++,this.updateNavBarTime(),this.updateNavBarButtons(),this.updateNavBaProgress(),this.loadPage()},lastPage:function(t){this.currentPage=this.$store.state.main.currentBook.pages.length-1,this.updateNavBarTime(),this.updateNavBarButtons(),this.updateNavBaProgress(),this.loadPage()},updateNavBarTime:function(){this.navBarTime=(new Date).getTime()},updateNavBarVisible:function(){this.navBarVisible=(new Date).getTime()-this.navBarTime<5e3,this.navBarVisible&&(this.updateNavBarButtons(),this.updateNavBaProgress())},updateNavBarButtons:function(){var t=this.$store.state.main.currentBook.pages.length;m["a"].broadcast(f["a"].READER_NAV_BAR_ENABLE_FIRST,0!==this.currentPage),m["a"].broadcast(f["a"].READER_NAV_BAR_ENABLE_PREVIOUS,0!==this.currentPage),m["a"].broadcast(f["a"].READER_NAV_BAR_ENABLE_NEXT,this.currentPage<t-1),m["a"].broadcast(f["a"].READER_NAV_BAR_ENABLE_LAST,this.currentPage<t-1)},updateNavBaProgress:function(){var t=(this.currentPage+1)/this.$store.state.main.currentBook.pages.length*100;m["a"].broadcast(f["a"].READER_NAV_BAR_PROGRESS,t)},url:function(){var t=this.$store.state.main.urlBase+"comics/"+this.$store.state.main.currentBook.id+"/"+this.$store.state.main.currentBook.issue+"/";return t+=this.$store.state.main.currentBook.pages[this.currentPage],t},loadPage:function(){var t=this.canvas.getContext("2d"),e=new Image;e.onload=function(){t.drawImage(e,0,0)},e.src=this.url()}}},x=U,y=(a("a83d"),a("9989")),L=Object(b["a"])(x,r,s,!1,null,"6dc4a807",null);e["default"]=L.exports;g()(L,"components",{QPage:y["a"]})}}]);